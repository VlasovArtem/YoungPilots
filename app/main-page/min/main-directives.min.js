var app=angular.module("main.directives",["ngMaterial"]);app.directive("broadcast",["$timeout","BroadcastLive","$route","Broadcast","$filter",function(b,a,e,c,d){return{restrict:"A",link:function(s,k,q){var i=60*1000;var j,l;c.get(function(t){j=d("dateMillis")(t.date.startDate,t.date.timezone)});var n=function(t,u){return t+(u*60000)};var m=function(B){if(_.isNull(j)||_.isUndefined(j)){throw new Error("Broadcast date is undefined")}var w=[["d","day","days"],["h","hour","hours"],["m","minute","minutes"],["s","second","seconds"]];var z=null;_.some(w,function(C){if(_.contains(C,B)){z=C[1];return true}return false});var x=j-l;var t=null;switch(z){case"day":var y=24*60*60*1000;t=x/y;break;case"hour":var u=60*60*1000;t=x/u;break;case"minute":var A=60*1000;t=x/A;break;case"second":var v=1000;t=x/v;break}return t};var r=true;var h=function(){if(m("d")<=1&&m("h")>3){i=3*60*60*1000}else{if(m("h")<=3&&m("m")>60){i=60*60*1000}else{if(m("m")<=60&&m("m")>10){i=10*60*1000}else{if(m("m")<=10&&m("s")>0){i=60*1000}else{if(m("s")<=0){a.get(function(){k.addClass("live");b.cancel(o);i=60*1000;r=false;f=b(g,2*60*60*1000);console.log(i+" (default: 86400000")},function(){if(m("m")<-60){j=null;o=b(p,60*60*1000);r=false;console.log(new Date(l)+" - Broadcast is not starting")}})}else{i=24*60*60*1000}}}}}};var g=function(){a.get(function(){},function(){e.reload()});f=b(g,2*60*60*1000)};var f=null;var p=function(){var t=new Date();l=n(t.getTime(),t.getTimezoneOffset());if(j<l){s.broadcastDate=null;i=2*60*60*1000}else{h()}o=b(t,i)};var o=b(p,i)}}}]);app.directive("countdown",["$timeout","$filter",function(a,b){return{restrict:"C",link:function(p,g,m){var e=p.$eval(m.conf);var f=b("convertDate")(e.date.startDate,e.date.timezone);var c=new Date();var h=function(){c=new Date().getTime()};var i=24*60*60*1000,n=60*60*1000,d=60*1000,k=1000;var o=function(){var t=f-c;var q=Math.floor(t/i),r=Math.floor((t-(q*i))/n),u=Math.floor((t-(q*i+r*n))/d),s=Math.floor((t-(q*i+r*n+u*d))/k);p.left={day:q,hour:r,minute:u,second:s}};var l=function(){h();o();if(f<c){p.setComplete(e)}j=a(l,k)};var j=a(l,k)},template:'<span>Next conference: <i>Days: {{left.day}}, <span ng-if="left.hour < 10">0</span>{{left.hour}}:<span ng-if="left.minute < 10">0</span>{{left.minute}}:<span ng-if="left.second < 10">0</span>{{left.second}}</i></span>'}}]);app.directive("popup",function(){return{restrict:"A",scope:{popupContent:"=",textContent:"@"},link:function(d,c,b){if(!angular.isUndefined(d.popupContent)||!angular.isUndefined(d.textContent)){var e=d.popupContent!==null&&(d.popupContent.length>110||!angular.isUndefined(d.textContent))?d.popupContent:d.textContent;if(!angular.isUndefined(e)){var a={content:e,trigger:"hover",placement:"bottom",container:"body"};$(c).popover(a)}}}}});app.directive("contacts",function(){return{restrict:"E",scope:{contact:"="},link:function(a){var b={github:"style/image/socials/github.png",twitter:"style/image/socials/twitter.png",linkedin:"style/image/socials/linkedin.png"};a.personalData=a.contact.lastname!==null?(a.contact.firstname+", "+a.contact.lastname):a.contact.firstname;a.contactSocials={};_.each(a.contact.socials,function(d,c){a.contactSocials[b[c]]=d})},templateUrl:"app/main-page/directive/main-page-contact.html"}});app.directive("searchData",["$timeout",function(a){return{restrict:"C",link:function(b,c){b.removeData=function(d){$(".ui.dropdown",c).dropdown("clear");b[d]=undefined};b.setData=function(e,d){b[e]=d};a(function(){$(".ui.dropdown",c).dropdown()},0)}}}]);app.directive("information",["$mdDialog",function(a){return{restrict:"E",required:"informationUrl",scope:{informationUrl:"@"},replace:true,link:function(b,c){b.openInfo=function(d){console.log("Open info directive");console.log(b.informationUrl);a.show({templateUrl:b.informationUrl,parent:angular.element(document.body),targetEvent:d,clickOutsideToClose:true})}},templateUrl:"app/main-page/directive/information.html"}}]);